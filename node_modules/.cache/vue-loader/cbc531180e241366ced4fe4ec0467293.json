{"remainingRequest":"/home/dani/Escritorio/vue-firebase/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dani/Escritorio/vue-firebase/src/views/usuario/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dani/Escritorio/vue-firebase/src/views/usuario/Login.vue","mtime":1552656292059},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/vuetify-loader/lib/loader.js","mtime":1549812933000},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n  required,\n  email,\n  minLength,\n  maxLength\n} from \"vuelidate/lib/validators\";\nimport { mapMutations, mapGetters } from \"vuex\";\nimport { auth } from \"@/firebase\";\n\n\nexport default {\n  data() {\n    return {\n      formulario: {\n        email: \"\",\n        password: \"\"\n      }\n    };\n  },\n  validations: {\n    formulario: {\n      email: {\n        required,\n        email\n      },\n      password: {\n        required,\n        minLength: minLength(6),\n        maxLength: maxLength(20)\n      }\n    }\n  },\n  methods: {\n    ...mapMutations([\"mostrarOcupado\", \"ocultarOcupado\", \"mostrarExito\", \"mostrarAdvertencia\"]),\n    ...mapMutations(\"sesion\", [\"actualizarUsuario\"]),\n    async ingresar() {\n      if (this.$v.formulario.$invalid) {\n        this.$v.formulario.$touch();\n        return;\n      }\n\n      let ocupado = {\n        titulo: \"Validando Credenciales\",\n        mensaje: \"Estamos validando tu información...\"\n      };\n\n      this.mostrarOcupado(ocupado);\n\n      try {\n        let cred = await auth.signInWithEmailAndPassword(\n          this.formulario.email,\n          this.formulario.password\n        );\n\n        let usuario = {\n          uid: cred.user.uid,\n          userName: \"newton\",\n          nombres: \"Isaac\",\n          apellidos: \"Newton\",\n          sexo: \"M\",\n          descripcion: \"Descripción\",\n          biografia: \"https://es.wikipedia.org/wiki/Isaac_Newton\",\n          fotoPerfil:\n            \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Sir_Isaac_Newton_%281643-1727%29.jpg/220px-Sir_Isaac_Newton_%281643-1727%29.jpg\"\n        };\n\n        this.ocultarOcupado();\n        this.actualizarUsuario(usuario);\n        this.mostrarExito(this.saludo);\n        this.$router.push({ name: \"home\" });\n      } catch (error) {\n        this.ocultarOcupado();\n\n        switch (error.code) {\n          case \"auth/user-not-found\":\n            this.mostrarAdvertencia(\"El usuario que ha introducido no existe\");\n            break;\n          case \"auth/wrong-password\":\n            this.mostrarAdvertencia(\"La contraseña que ha introducido no es correcta\");\n            break;\n          default:\n            this.mostrarError(\n              \"Ocurrió un error registrando tu cuenta. Inténtalo más tarde.\"\n            );\n            break;\n        }\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(\"sesion\", [\"saludo\"]),\n    erroresEmail() {\n      let errores = [];\n      if (!this.$v.formulario.email.$dirty) {\n        return errores;\n      }\n      if (!this.$v.formulario.email.required) {\n        errores.push(\"Ingresa tu email.\");\n      }\n      if (!this.$v.formulario.email.email) {\n        errores.push(\"Ingresa un email válido.\");\n      }\n      return errores;\n    },\n    erroresPassword() {\n      let errores = [];\n      if (!this.$v.formulario.password.$dirty) {\n        return errores;\n      }\n      if (!this.$v.formulario.password.required) {\n        errores.push(\"Ingresa tu password.\");\n      }\n      if (!this.$v.formulario.password.minLength) {\n        errores.push(\"Ingresa al menos 6 caracteres.\");\n      }\n      if (!this.$v.formulario.password.maxLength) {\n        errores.push(\"Ingresa máximo 20 caracteres.\");\n      }\n      return errores;\n    }\n  }\n};\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/usuario","sourcesContent":["<template>\n  <v-layout justify-center align-center>\n    <v-flex xs12 sm8 md6 lg5 xl4>\n      <v-card class=\"elevation-6\">\n        <v-toolbar color=\"primary\" dark card>\n          <v-toolbar-title>Ingresa tus Credenciales</v-toolbar-title>\n        </v-toolbar>\n        <v-card-text>\n          <v-text-field\n            label=\"Email\" autofocus\n            v-model=\"formulario.email\"\n            :error-messages=\"erroresEmail\"\n            @blur=\"$v.formulario.email.$touch()\"\n          ></v-text-field>\n          <v-text-field\n            label=\"Password\"\n            @keyup.enter=\"ingresar\"\n            v-model=\"formulario.password\"\n            :error-messages=\"erroresPassword\"\n            @blur=\"$v.formulario.password.$touch()\"\n            type=\"password\"\n          ></v-text-field>\n        </v-card-text>\n        <v-card-text>\n          <v-layout justify-end>\n            <v-btn\n              @click=\"ingresar\"\n              :depressed=\"$v.formulario.$invalid\"\n              :disabled=\"$v.formulario.$invalid\"\n              color=\"secondary\"\n            >Ingresar</v-btn>\n          </v-layout>\n        </v-card-text>\n        <v-card-actions>\n          <v-btn :to=\"{ name: 'registro' }\" flat color=\"secondary\">¿No tienes cuenta? Regístrate.</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-flex>\n  </v-layout>\n</template>\n\n<script>\nimport {\n  required,\n  email,\n  minLength,\n  maxLength\n} from \"vuelidate/lib/validators\";\nimport { mapMutations, mapGetters } from \"vuex\";\nimport { auth } from \"@/firebase\";\n\n\nexport default {\n  data() {\n    return {\n      formulario: {\n        email: \"\",\n        password: \"\"\n      }\n    };\n  },\n  validations: {\n    formulario: {\n      email: {\n        required,\n        email\n      },\n      password: {\n        required,\n        minLength: minLength(6),\n        maxLength: maxLength(20)\n      }\n    }\n  },\n  methods: {\n    ...mapMutations([\"mostrarOcupado\", \"ocultarOcupado\", \"mostrarExito\", \"mostrarAdvertencia\"]),\n    ...mapMutations(\"sesion\", [\"actualizarUsuario\"]),\n    async ingresar() {\n      if (this.$v.formulario.$invalid) {\n        this.$v.formulario.$touch();\n        return;\n      }\n\n      let ocupado = {\n        titulo: \"Validando Credenciales\",\n        mensaje: \"Estamos validando tu información...\"\n      };\n\n      this.mostrarOcupado(ocupado);\n\n      try {\n        let cred = await auth.signInWithEmailAndPassword(\n          this.formulario.email,\n          this.formulario.password\n        );\n\n        let usuario = {\n          uid: cred.user.uid,\n          userName: \"newton\",\n          nombres: \"Isaac\",\n          apellidos: \"Newton\",\n          sexo: \"M\",\n          descripcion: \"Descripción\",\n          biografia: \"https://es.wikipedia.org/wiki/Isaac_Newton\",\n          fotoPerfil:\n            \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Sir_Isaac_Newton_%281643-1727%29.jpg/220px-Sir_Isaac_Newton_%281643-1727%29.jpg\"\n        };\n\n        this.ocultarOcupado();\n        this.actualizarUsuario(usuario);\n        this.mostrarExito(this.saludo);\n        this.$router.push({ name: \"home\" });\n      } catch (error) {\n        this.ocultarOcupado();\n\n        switch (error.code) {\n          case \"auth/user-not-found\":\n            this.mostrarAdvertencia(\"El usuario que ha introducido no existe\");\n            break;\n          case \"auth/wrong-password\":\n            this.mostrarAdvertencia(\"La contraseña que ha introducido no es correcta\");\n            break;\n          default:\n            this.mostrarError(\n              \"Ocurrió un error registrando tu cuenta. Inténtalo más tarde.\"\n            );\n            break;\n        }\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(\"sesion\", [\"saludo\"]),\n    erroresEmail() {\n      let errores = [];\n      if (!this.$v.formulario.email.$dirty) {\n        return errores;\n      }\n      if (!this.$v.formulario.email.required) {\n        errores.push(\"Ingresa tu email.\");\n      }\n      if (!this.$v.formulario.email.email) {\n        errores.push(\"Ingresa un email válido.\");\n      }\n      return errores;\n    },\n    erroresPassword() {\n      let errores = [];\n      if (!this.$v.formulario.password.$dirty) {\n        return errores;\n      }\n      if (!this.$v.formulario.password.required) {\n        errores.push(\"Ingresa tu password.\");\n      }\n      if (!this.$v.formulario.password.minLength) {\n        errores.push(\"Ingresa al menos 6 caracteres.\");\n      }\n      if (!this.$v.formulario.password.maxLength) {\n        errores.push(\"Ingresa máximo 20 caracteres.\");\n      }\n      return errores;\n    }\n  }\n};\n</script>\n"]}]}