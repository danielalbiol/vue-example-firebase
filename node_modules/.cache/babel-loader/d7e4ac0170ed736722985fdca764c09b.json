{"remainingRequest":"/home/dani/Escritorio/vue-firebase/node_modules/babel-loader/lib/index.js!/home/dani/Escritorio/vue-firebase/node_modules/vuetify-loader/lib/loader.js!/home/dani/Escritorio/vue-firebase/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/dani/Escritorio/vue-firebase/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dani/Escritorio/vue-firebase/src/views/usuario/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dani/Escritorio/vue-firebase/src/views/usuario/Login.vue","mtime":1552656292059},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/vuetify-loader/lib/loader.js","mtime":1549812933000},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/dani/Escritorio/vue-firebase/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/dani/Escritorio/vue-firebase/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { required, email, minLength, maxLength } from \"vuelidate/lib/validators\";\nimport { mapMutations, mapGetters } from \"vuex\";\nimport { auth } from \"@/firebase\";\nexport default {\n  data: function data() {\n    return {\n      formulario: {\n        email: \"\",\n        password: \"\"\n      }\n    };\n  },\n  validations: {\n    formulario: {\n      email: {\n        required: required,\n        email: email\n      },\n      password: {\n        required: required,\n        minLength: minLength(6),\n        maxLength: maxLength(20)\n      }\n    }\n  },\n  methods: _objectSpread({}, mapMutations([\"mostrarOcupado\", \"ocultarOcupado\", \"mostrarExito\", \"mostrarAdvertencia\"]), mapMutations(\"sesion\", [\"actualizarUsuario\"]), {\n    ingresar: function () {\n      var _ingresar = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var ocupado, cred, usuario;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.$v.formulario.$invalid) {\n                  _context.next = 3;\n                  break;\n                }\n\n                this.$v.formulario.$touch();\n                return _context.abrupt(\"return\");\n\n              case 3:\n                ocupado = {\n                  titulo: \"Validando Credenciales\",\n                  mensaje: \"Estamos validando tu información...\"\n                };\n                this.mostrarOcupado(ocupado);\n                _context.prev = 5;\n                _context.next = 8;\n                return auth.signInWithEmailAndPassword(this.formulario.email, this.formulario.password);\n\n              case 8:\n                cred = _context.sent;\n                usuario = {\n                  uid: cred.user.uid,\n                  userName: \"newton\",\n                  nombres: \"Isaac\",\n                  apellidos: \"Newton\",\n                  sexo: \"M\",\n                  descripcion: \"Descripción\",\n                  biografia: \"https://es.wikipedia.org/wiki/Isaac_Newton\",\n                  fotoPerfil: \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Sir_Isaac_Newton_%281643-1727%29.jpg/220px-Sir_Isaac_Newton_%281643-1727%29.jpg\"\n                };\n                this.ocultarOcupado();\n                this.actualizarUsuario(usuario);\n                this.mostrarExito(this.saludo);\n                this.$router.push({\n                  name: \"home\"\n                });\n                _context.next = 28;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](5);\n                this.ocultarOcupado();\n                _context.t1 = _context.t0.code;\n                _context.next = _context.t1 === \"auth/user-not-found\" ? 22 : _context.t1 === \"auth/wrong-password\" ? 24 : 26;\n                break;\n\n              case 22:\n                this.mostrarAdvertencia(\"El usuario que ha introducido no existe\");\n                return _context.abrupt(\"break\", 28);\n\n              case 24:\n                this.mostrarAdvertencia(\"La contraseña que ha introducido no es correcta\");\n                return _context.abrupt(\"break\", 28);\n\n              case 26:\n                this.mostrarError(\"Ocurrió un error registrando tu cuenta. Inténtalo más tarde.\");\n                return _context.abrupt(\"break\", 28);\n\n              case 28:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[5, 16]]);\n      }));\n\n      function ingresar() {\n        return _ingresar.apply(this, arguments);\n      }\n\n      return ingresar;\n    }()\n  }),\n  computed: _objectSpread({}, mapGetters(\"sesion\", [\"saludo\"]), {\n    erroresEmail: function erroresEmail() {\n      var errores = [];\n\n      if (!this.$v.formulario.email.$dirty) {\n        return errores;\n      }\n\n      if (!this.$v.formulario.email.required) {\n        errores.push(\"Ingresa tu email.\");\n      }\n\n      if (!this.$v.formulario.email.email) {\n        errores.push(\"Ingresa un email válido.\");\n      }\n\n      return errores;\n    },\n    erroresPassword: function erroresPassword() {\n      var errores = [];\n\n      if (!this.$v.formulario.password.$dirty) {\n        return errores;\n      }\n\n      if (!this.$v.formulario.password.required) {\n        errores.push(\"Ingresa tu password.\");\n      }\n\n      if (!this.$v.formulario.password.minLength) {\n        errores.push(\"Ingresa al menos 6 caracteres.\");\n      }\n\n      if (!this.$v.formulario.password.maxLength) {\n        errores.push(\"Ingresa máximo 20 caracteres.\");\n      }\n\n      return errores;\n    }\n  })\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-layout justify-center align-center>\n    <v-flex xs12 sm8 md6 lg5 xl4>\n      <v-card class=\"elevation-6\">\n        <v-toolbar color=\"primary\" dark card>\n          <v-toolbar-title>Ingresa tus Credenciales</v-toolbar-title>\n        </v-toolbar>\n        <v-card-text>\n          <v-text-field\n            label=\"Email\" autofocus\n            v-model=\"formulario.email\"\n            :error-messages=\"erroresEmail\"\n            @blur=\"$v.formulario.email.$touch()\"\n          ></v-text-field>\n          <v-text-field\n            label=\"Password\"\n            @keyup.enter=\"ingresar\"\n            v-model=\"formulario.password\"\n            :error-messages=\"erroresPassword\"\n            @blur=\"$v.formulario.password.$touch()\"\n            type=\"password\"\n          ></v-text-field>\n        </v-card-text>\n        <v-card-text>\n          <v-layout justify-end>\n            <v-btn\n              @click=\"ingresar\"\n              :depressed=\"$v.formulario.$invalid\"\n              :disabled=\"$v.formulario.$invalid\"\n              color=\"secondary\"\n            >Ingresar</v-btn>\n          </v-layout>\n        </v-card-text>\n        <v-card-actions>\n          <v-btn :to=\"{ name: 'registro' }\" flat color=\"secondary\">¿No tienes cuenta? Regístrate.</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-flex>\n  </v-layout>\n</template>\n\n<script>\nimport {\n  required,\n  email,\n  minLength,\n  maxLength\n} from \"vuelidate/lib/validators\";\nimport { mapMutations, mapGetters } from \"vuex\";\nimport { auth } from \"@/firebase\";\n\n\nexport default {\n  data() {\n    return {\n      formulario: {\n        email: \"\",\n        password: \"\"\n      }\n    };\n  },\n  validations: {\n    formulario: {\n      email: {\n        required,\n        email\n      },\n      password: {\n        required,\n        minLength: minLength(6),\n        maxLength: maxLength(20)\n      }\n    }\n  },\n  methods: {\n    ...mapMutations([\"mostrarOcupado\", \"ocultarOcupado\", \"mostrarExito\", \"mostrarAdvertencia\"]),\n    ...mapMutations(\"sesion\", [\"actualizarUsuario\"]),\n    async ingresar() {\n      if (this.$v.formulario.$invalid) {\n        this.$v.formulario.$touch();\n        return;\n      }\n\n      let ocupado = {\n        titulo: \"Validando Credenciales\",\n        mensaje: \"Estamos validando tu información...\"\n      };\n\n      this.mostrarOcupado(ocupado);\n\n      try {\n        let cred = await auth.signInWithEmailAndPassword(\n          this.formulario.email,\n          this.formulario.password\n        );\n\n        let usuario = {\n          uid: cred.user.uid,\n          userName: \"newton\",\n          nombres: \"Isaac\",\n          apellidos: \"Newton\",\n          sexo: \"M\",\n          descripcion: \"Descripción\",\n          biografia: \"https://es.wikipedia.org/wiki/Isaac_Newton\",\n          fotoPerfil:\n            \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Sir_Isaac_Newton_%281643-1727%29.jpg/220px-Sir_Isaac_Newton_%281643-1727%29.jpg\"\n        };\n\n        this.ocultarOcupado();\n        this.actualizarUsuario(usuario);\n        this.mostrarExito(this.saludo);\n        this.$router.push({ name: \"home\" });\n      } catch (error) {\n        this.ocultarOcupado();\n\n        switch (error.code) {\n          case \"auth/user-not-found\":\n            this.mostrarAdvertencia(\"El usuario que ha introducido no existe\");\n            break;\n          case \"auth/wrong-password\":\n            this.mostrarAdvertencia(\"La contraseña que ha introducido no es correcta\");\n            break;\n          default:\n            this.mostrarError(\n              \"Ocurrió un error registrando tu cuenta. Inténtalo más tarde.\"\n            );\n            break;\n        }\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(\"sesion\", [\"saludo\"]),\n    erroresEmail() {\n      let errores = [];\n      if (!this.$v.formulario.email.$dirty) {\n        return errores;\n      }\n      if (!this.$v.formulario.email.required) {\n        errores.push(\"Ingresa tu email.\");\n      }\n      if (!this.$v.formulario.email.email) {\n        errores.push(\"Ingresa un email válido.\");\n      }\n      return errores;\n    },\n    erroresPassword() {\n      let errores = [];\n      if (!this.$v.formulario.password.$dirty) {\n        return errores;\n      }\n      if (!this.$v.formulario.password.required) {\n        errores.push(\"Ingresa tu password.\");\n      }\n      if (!this.$v.formulario.password.minLength) {\n        errores.push(\"Ingresa al menos 6 caracteres.\");\n      }\n      if (!this.$v.formulario.password.maxLength) {\n        errores.push(\"Ingresa máximo 20 caracteres.\");\n      }\n      return errores;\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/views/usuario"}]}