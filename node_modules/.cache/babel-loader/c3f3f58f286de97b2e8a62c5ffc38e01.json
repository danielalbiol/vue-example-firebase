{"remainingRequest":"/home/dani/Escritorio/vue-firebase/node_modules/babel-loader/lib/index.js!/home/dani/Escritorio/vue-firebase/node_modules/vuetify-loader/lib/loader.js!/home/dani/Escritorio/vue-firebase/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/dani/Escritorio/vue-firebase/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dani/Escritorio/vue-firebase/src/views/usuario/Registro.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dani/Escritorio/vue-firebase/src/views/usuario/Registro.vue","mtime":1552655634179},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/vuetify-loader/lib/loader.js","mtime":1549812933000},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dani/Escritorio/vue-firebase/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/dani/Escritorio/vue-firebase/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/dani/Escritorio/vue-firebase/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { required, email, minLength, maxLength, sameAs } from 'vuelidate/lib/validators';\nimport { nombreCompuesto } from '@/utils/validaciones';\nimport { mapMutations, mapGetters } from 'vuex';\nimport { auth } from '@/firebase';\nexport default {\n  data: function data() {\n    return {\n      vista: 1,\n      f1: {\n        email: '',\n        password: '',\n        repetirPassword: ''\n      },\n      f2: {\n        nombres: '',\n        apellidos: ''\n      },\n      fechaNacimiento: null,\n      fechaMaxima: null\n    };\n  },\n  validations: {\n    f1: {\n      email: {\n        required: required,\n        email: email\n      },\n      password: {\n        required: required,\n        minLength: minLength(6),\n        maxLength: maxLength(20)\n      },\n      repetirPassword: {\n        sameAs: sameAs('password')\n      }\n    },\n    f2: {\n      nombres: {\n        required: required,\n        minLength: minLength(3),\n        maxLength: maxLength(20),\n        nombreCompuesto: nombreCompuesto\n      },\n      apellidos: {\n        required: required,\n        minLength: minLength(3),\n        maxLength: maxLength(20),\n        nombreCompuesto: nombreCompuesto\n      }\n    },\n    fechaNacimiento: {\n      required: required\n    }\n  },\n  created: function created() {\n    var fechaActual = new Date();\n    this.fechaMaxima = new Date(fechaActual.setFullYear(fechaActual.getFullYear() - 13)).toISOString().substr(0, 10);\n  },\n  methods: _objectSpread({}, mapMutations(['mostrarOcupado', 'ocultarOcupado', 'mostrarExito', 'mostrarError', 'mostrarAdvertencia']), mapMutations('sesion', ['actualizarUsuario']), {\n    siguiente: function siguiente(vista) {\n      switch (vista) {\n        case 1:\n          if (this.$v.f1.$invalid) {\n            this.$v.f1.$touch();\n            return;\n          } else {\n            this.vista++;\n          }\n\n          break;\n\n        case 2:\n          if (this.$v.f2.$invalid) {\n            this.$v.f2.$touch();\n            return;\n          } else {\n            this.vista++;\n          }\n\n          break;\n      }\n    },\n    registrar: function () {\n      var _registrar = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var cred, uid, usuario;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.$v.fechaNacimiento.$invalid) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.prev = 2;\n                this.mostrarOcupado({\n                  titulo: 'Creando Registro',\n                  mensaje: 'Estamos registrando tu información...'\n                });\n                _context.next = 6;\n                return auth.createUserWithEmailAndPassword(this.f1.email, this.f1.password);\n\n              case 6:\n                cred = _context.sent;\n                uid = cred.user.uid;\n                usuario = {\n                  uid: uid,\n                  userName: 'newton',\n                  nombres: this.f2.nombres,\n                  apellidos: this.f2.apellidos,\n                  sexo: 'M',\n                  descripcion: 'Descripción',\n                  biografia: 'https://es.wikipedia.org/wiki/Isaac_Newton',\n                  fotoPerfil: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Sir_Isaac_Newton_%281643-1727%29.jpg/220px-Sir_Isaac_Newton_%281643-1727%29.jpg'\n                };\n                this.ocultarOcupado();\n                this.actualizarUsuario(usuario);\n                this.mostrarExito(this.saludo);\n                this.$router.push({\n                  name: 'home'\n                });\n                _context.next = 25;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t0 = _context[\"catch\"](2);\n                this.ocultarOcupado();\n                _context.t1 = _context.t0.code;\n                _context.next = _context.t1 === 'auth/email-already-in-use' ? 21 : 23;\n                break;\n\n              case 21:\n                this.mostrarAdvertencia('Ya se ha registrado esta dirección de email');\n                return _context.abrupt(\"break\", 25);\n\n              case 23:\n                this.mostrarError('Ocurrió un error registrando tu cuenta. Inténtalo más tarde.');\n                return _context.abrupt(\"break\", 25);\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 15]]);\n      }));\n\n      function registrar() {\n        return _registrar.apply(this, arguments);\n      }\n\n      return registrar;\n    }(),\n    enter: function enter() {\n      if (this.vista == 3 && !this.fechaNacimiento) {\n        this.$refs.calendario.activePicker = 'YEAR';\n      }\n    }\n  }),\n  computed: _objectSpread({}, mapGetters('sesion', ['saludo']), {\n    erroresEmail: function erroresEmail() {\n      var errores = [];\n\n      if (!this.$v.f1.email.$dirty) {\n        return errores;\n      }\n\n      if (!this.$v.f1.email.required) {\n        errores.push('Ingresa tu email.');\n      }\n\n      if (!this.$v.f1.email.email) {\n        errores.push('Ingresa un email válido.');\n      }\n\n      return errores;\n    },\n    erroresPassword: function erroresPassword() {\n      var errores = [];\n\n      if (!this.$v.f1.password.$dirty) {\n        return errores;\n      }\n\n      if (!this.$v.f1.password.required) {\n        errores.push('Ingresa tu password.');\n      }\n\n      if (!this.$v.f1.password.minLength) {\n        errores.push('Ingresa al menos 6 caracteres.');\n      }\n\n      if (!this.$v.f1.password.maxLength) {\n        errores.push('Ingresa máximo 20 caracteres.');\n      }\n\n      return errores;\n    },\n    erroresRepetirPassword: function erroresRepetirPassword() {\n      var errores = [];\n\n      if (!this.$v.f1.repetirPassword.$dirty) {\n        return errores;\n      }\n\n      if (!this.$v.f1.repetirPassword.sameAs) {\n        errores.push('Las contraseñas no coinciden.');\n      }\n\n      return errores;\n    },\n    erroresNombres: function erroresNombres() {\n      var errores = [];\n\n      if (!this.$v.f2.nombres.$dirty) {\n        return errores;\n      }\n\n      if (!this.$v.f2.nombres.required) {\n        errores.push('Ingresa tu nombre.');\n      }\n\n      if (!this.$v.f2.nombres.minLength) {\n        errores.push('Ingresa al menos 3 caracteres.');\n      }\n\n      if (!this.$v.f2.nombres.maxLength) {\n        errores.push('Ingresa máximo 20 caracteres.');\n      }\n\n      if (!this.$v.f2.nombres.nombreCompuesto) {\n        errores.push('Ingresa un nombre válido.');\n      }\n\n      return errores;\n    },\n    erroresApellidos: function erroresApellidos() {\n      var errores = [];\n\n      if (!this.$v.f2.apellidos.$dirty) {\n        return errores;\n      }\n\n      if (!this.$v.f2.apellidos.required) {\n        errores.push('Ingresa tus apellidos.');\n      }\n\n      if (!this.$v.f2.apellidos.minLength) {\n        errores.push('Ingresa al menos 3 caracteres.');\n      }\n\n      if (!this.$v.f2.apellidos.maxLength) {\n        errores.push('Ingresa máximo 20 caracteres.');\n      }\n\n      if (!this.$v.f2.apellidos.nombreCompuesto) {\n        errores.push('Ingresa un apellido válido.');\n      }\n\n      return errores;\n    }\n  })\n};",{"version":3,"sources":["Registro.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-layout justify-center align-center>\n    <v-flex xs12 sm8 md6 lg5 xl4>\n      <v-slide-y-transition mode=\"out-in\" @enter=\"enter\">\n        <v-card v-if=\"vista == 1\" :key=\"1\" class=\"elevation-6\">\n          <v-toolbar color=\"primary\" dark card>\n            <v-toolbar-title>\n              Regístrate\n            </v-toolbar-title>\n          </v-toolbar>\n          <v-card-text>\n            <v-text-field @blur=\"$v.f1.email.$touch()\" :error-messages=\"erroresEmail\" v-model=\"f1.email\" label=\"Email\"></v-text-field>\n            <v-text-field @blur=\"$v.f1.password.$touch()\" :error-messages=\"erroresPassword\" v-model=\"f1.password\" label=\"Password\" type=\"password\"></v-text-field>\n            <v-text-field @keyup.enter=\"siguiente(1)\" @blur=\"$v.f1.repetirPassword.$touch()\" :error-messages=\"erroresRepetirPassword\" v-model=\"f1.repetirPassword\" label=\"Repetir Password\" type=\"password\"></v-text-field>\n          </v-card-text>\n          <v-card-text>\n            <v-layout justify-end>\n              <v-btn :depressed=\"$v.f1.$invalid\" :disabled=\"$v.f1.$invalid\" @click=\"siguiente(1)\" color=\"secondary\">Siguiente</v-btn>\n            </v-layout>\n          </v-card-text>\n          <v-card-actions>\n            <v-btn :to=\"{ name: 'login' }\" flat color=\"secondary\">\n              ¿Ya tienes cuenta? Ingresa.\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n        <v-card v-if=\"vista == 2\" :key=\"2\" class=\"elevation-6\">\n          <v-toolbar color=\"primary\" dark card>\n            <v-toolbar-title>\n              Ingresa tus Nombres y Apellidos\n            </v-toolbar-title>\n          </v-toolbar>\n          <v-card-text>\n            <v-text-field @blur=\"$v.f2.nombres.$touch()\" autofocus :error-messages=\"erroresNombres\" v-model=\"f2.nombres\" label=\"Nombres\"></v-text-field>\n            <v-text-field @keyup.enter=\"siguiente(2)\" @blur=\"$v.f2.apellidos.$touch()\" :error-messages=\"erroresApellidos\" v-model=\"f2.apellidos\" label=\"Apellidos\"></v-text-field>\n          </v-card-text>\n          <v-card-text>\n            <v-layout>\n              <v-flex xs6>\n                <v-layout justify-start>\n                  <v-btn @click=\"vista--\">Atrás</v-btn>\n                </v-layout>\n              </v-flex>\n              <v-flex xs6>\n                <v-layout justify-end>\n                  <v-btn @click=\"siguiente(2)\" :depressed=\"$v.f2.$invalid\" :disabled=\"$v.f2.$invalid\" color=\"secondary\">Siguiente</v-btn>\n                </v-layout>\n              </v-flex>\n            </v-layout>\n          </v-card-text>\n        </v-card>\n        <v-card v-if=\"vista == 3\" :key=\"3\" class=\"elevation-6\">\n          <v-toolbar color=\"primary\" dark card>\n            <v-toolbar-title>\n              Selecciona tu Fecha de Nacimiento\n            </v-toolbar-title>\n          </v-toolbar>\n          <v-card-text>\n            <v-layout justify-center>\n              <v-date-picker ref=\"calendario\" :max=\"fechaMaxima\" v-model=\"fechaNacimiento\" reactive locale=\"es-co\" class=\"elevation-3\"></v-date-picker>\n            </v-layout>\n          </v-card-text>\n          <v-card-text>\n            <v-layout>\n              <v-flex xs6>\n                <v-layout justify-start>\n                  <v-btn @click=\"vista--\">Atrás</v-btn>\n                </v-layout>\n              </v-flex>\n              <v-flex xs6>\n                <v-layout justify-end>\n                  <v-btn @click=\"registrar\" :depressed=\"$v.fechaNacimiento.$invalid\" :disabled=\"$v.fechaNacimiento.$invalid\" color=\"secondary\">Registrarse</v-btn>\n                </v-layout>\n              </v-flex>\n            </v-layout>\n          </v-card-text>\n        </v-card>\n      </v-slide-y-transition>\n    </v-flex>\n  </v-layout>\n</template>\n\n<script>\nimport { required, email, minLength, maxLength, sameAs } from 'vuelidate/lib/validators'\nimport { nombreCompuesto } from '@/utils/validaciones'\nimport { mapMutations, mapGetters } from 'vuex'\nimport { auth } from '@/firebase'\n\nexport default {\n  data() {\n    return {\n      vista: 1,\n      f1: {\n        email: '',\n        password: '',\n        repetirPassword: ''\n      },\n      f2: {\n        nombres: '',\n        apellidos: ''\n      },\n      fechaNacimiento: null,\n      fechaMaxima: null\n    }\n  },\n  validations: {\n    f1: {\n      email: {\n        required,\n        email\n      },\n      password: {\n        required,\n        minLength: minLength(6),\n        maxLength: maxLength(20)\n      },\n      repetirPassword: {\n        sameAs: sameAs('password')\n      }\n    },\n    f2: {\n      nombres: {\n        required,\n        minLength: minLength(3),\n        maxLength: maxLength(20),\n        nombreCompuesto\n      },\n      apellidos: {\n        required,\n        minLength: minLength(3),\n        maxLength: maxLength(20),\n        nombreCompuesto\n      }\n    },\n    fechaNacimiento: {\n      required\n    }\n  },\n  created() {\n    let fechaActual = new Date()\n    this.fechaMaxima = new Date(fechaActual.setFullYear(fechaActual.getFullYear() - 13))\n      .toISOString()\n      .substr(0, 10)\n  },\n  methods: {\n    ...mapMutations(['mostrarOcupado', 'ocultarOcupado', 'mostrarExito', 'mostrarError', 'mostrarAdvertencia']),\n    ...mapMutations('sesion', ['actualizarUsuario']),\n    siguiente(vista) {\n      switch (vista) {\n        case 1:\n          if (this.$v.f1.$invalid) {\n            this.$v.f1.$touch()\n            return\n          }\n          else {\n            this.vista++\n          }\n          break\n        case 2:\n          if (this.$v.f2.$invalid) {\n            this.$v.f2.$touch()\n            return\n          }\n          else {\n            this.vista++\n          }\n          break\n      }\n    },\n    async registrar() {\n      if (this.$v.fechaNacimiento.$invalid) { return }\n\n      try {\n        this.mostrarOcupado({ titulo: 'Creando Registro', mensaje: 'Estamos registrando tu información...' })\n\n        let cred = await auth.createUserWithEmailAndPassword(this.f1.email, this.f1.password)\n        let uid = cred.user.uid\n\n        let usuario = {\n          uid,\n          userName: 'newton',\n          nombres: this.f2.nombres,\n          apellidos: this.f2.apellidos,\n          sexo: 'M',\n          descripcion: 'Descripción',\n          biografia: 'https://es.wikipedia.org/wiki/Isaac_Newton',\n          fotoPerfil: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Sir_Isaac_Newton_%281643-1727%29.jpg/220px-Sir_Isaac_Newton_%281643-1727%29.jpg'\n        }\n\n        this.ocultarOcupado()\n        this.actualizarUsuario(usuario)\n        this.mostrarExito(this.saludo)\n        this.$router.push( { name: 'home' } )\n      }\n      catch (error) {\n        this.ocultarOcupado()\n\n        switch(error.code) {\n          case 'auth/email-already-in-use':\n            this.mostrarAdvertencia('Ya se ha registrado esta dirección de email')\n            break\n          default:\n            this.mostrarError('Ocurrió un error registrando tu cuenta. Inténtalo más tarde.')\n            break\n        }\n        \n      }\n    },\n    enter() {\n      if (this.vista == 3 && !this.fechaNacimiento) {\n        this.$refs.calendario.activePicker = 'YEAR'\n      }\n    }\n  },\n  computed: {\n    ...mapGetters('sesion', ['saludo']),\n    erroresEmail() {\n      let errores = []\n      if (!this.$v.f1.email.$dirty) { return errores }\n      if (!this.$v.f1.email.required) { errores.push('Ingresa tu email.') }\n      if (!this.$v.f1.email.email) { errores.push('Ingresa un email válido.') }\n      return errores\n    },\n    erroresPassword() {\n      let errores = []\n      if (!this.$v.f1.password.$dirty) { return errores }\n      if (!this.$v.f1.password.required) { errores.push('Ingresa tu password.') }\n      if (!this.$v.f1.password.minLength) { errores.push('Ingresa al menos 6 caracteres.') }\n      if (!this.$v.f1.password.maxLength) { errores.push('Ingresa máximo 20 caracteres.') }\n      return errores\n    },\n    erroresRepetirPassword() {\n      let errores = []\n      if (!this.$v.f1.repetirPassword.$dirty) { return errores }\n      if (!this.$v.f1.repetirPassword.sameAs) { errores.push('Las contraseñas no coinciden.') }\n      return errores\n    },\n    erroresNombres() {\n      let errores = []\n      if (!this.$v.f2.nombres.$dirty) { return errores }\n      if (!this.$v.f2.nombres.required) { errores.push('Ingresa tu nombre.') }\n      if (!this.$v.f2.nombres.minLength) { errores.push('Ingresa al menos 3 caracteres.') }\n      if (!this.$v.f2.nombres.maxLength) { errores.push('Ingresa máximo 20 caracteres.') }\n      if (!this.$v.f2.nombres.nombreCompuesto) { errores.push('Ingresa un nombre válido.') }\n      return errores\n    },\n    erroresApellidos() {\n      let errores = []\n      if (!this.$v.f2.apellidos.$dirty) { return errores }\n      if (!this.$v.f2.apellidos.required) { errores.push('Ingresa tus apellidos.') }\n      if (!this.$v.f2.apellidos.minLength) { errores.push('Ingresa al menos 3 caracteres.') }\n      if (!this.$v.f2.apellidos.maxLength) { errores.push('Ingresa máximo 20 caracteres.') }\n      if (!this.$v.f2.apellidos.nombreCompuesto) { errores.push('Ingresa un apellido válido.') }\n      return errores\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/usuario"}]}